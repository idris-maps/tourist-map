!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var p="function"==typeof require&&require
if(!s&&p)return p(a,!0)
if(o)return o(a,!0)
var c=new Error("Cannot find module '"+a+"'")
throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}}
t[a][0].call(u.exports,function(e){var n=t[a][1][e]
return r(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a])
return r}({1:[function(e,t,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number")
return this._maxListeners=e,this},i.prototype.emit=function(e){var t,n,i,o,p,c
if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t
throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1
if(r(n))switch(arguments.length){case 1:n.call(this)
break
case 2:n.call(this,arguments[1])
break
case 3:n.call(this,arguments[1],arguments[2])
break
default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(a(n))for(o=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,p=0;i>p;p++)c[p].apply(this,o)
return!0},i.prototype.addListener=function(e,t){var n
if(!r(t))throw TypeError("listener must be a function")
return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(n=s(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function")
var i=!1
return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){var n,i,o,s
if(!r(t))throw TypeError("listener must be a function")
if(!this._events||!this._events[e])return this
if(n=this._events[e],o=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t)
else if(a(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s
break}if(0>i)return this
1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,n
if(!this._events)return this
if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this
if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t)
return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n)
else if(n)for(;n.length;)this.removeListener(e,n[n.length-1])
return delete this._events[e],this},i.prototype.listeners=function(e){var t
return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e]
if(r(t))return 1
if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,n){var i=e("./overpass/config"),r=i.radius,o=i.timeout,a=e("./utils/bbox-km"),s=e("./overpass/create-url"),p=e("./utils/get-json"),c=e("./overpass/parse")
t.exports=function(e,t,n){if("tourism"===t){var u=s(a(e,r),i.tourism(),o)
p(u,function(e,t){e?n(e):n(null,c.tourism(t))})}else if("drink"===t){var u=s(a(e,r),i.drink(),o)
p(u,function(e,t){e?n(e):n(null,c.drink(t))})}else if("eat"===t){var u=s(a(e,r),i.eat(),o)
p(u,function(e,t){e?n(e):n(null,c.eat(t))})}else n(t+" is not a valid type")}},{"./overpass/config":4,"./overpass/create-url":5,"./overpass/parse":7,"./utils/bbox-km":9,"./utils/get-json":10}],3:[function(e,t,n){var i=e("./place/parse"),r=e("./utils/get-json")
t.exports=function(e,t){var n="https://nominatim.openstreetmap.org/search?format=json&q="+e
r(n,function(e,n){e?t(e):t(null,i(n))})}},{"./place/parse":8,"./utils/get-json":10}],4:[function(e,t,n){function i(){var e=["aquarium","artwork","attraction","gallery","information","museum","theme_park","viewpoint","zoo"],t=[]
return e.forEach(function(e){t.push({types:["node","way","relation"],key:"tourism",val:e})}),t}function r(){var e=["bar","pub","cafe"],t=[]
return e.forEach(function(e){t.push({types:["node","way","relation"],key:"amenity",val:e})}),t}function o(){return[{types:["node","way","relation"],key:"amenity",val:"restaurant"}]}n.tourism=i,n.drink=r,n.eat=o,n.radius=1.5,n.timeout=30},{}],5:[function(e,t,n){function i(e){return"%28"+e[1]+"%2C"+e[0]+"%2C"+e[3]+"%2C"+e[2]+"%29"}function r(e,t,n){var i="http://www.overpass-api.de/api/interpreter?data=[out:json]",r=25
return n&&(r=n),i=i+"[timeout:"+r+"];(",t.forEach(function(t){var n=t.key,r=t.val
t.types.forEach(function(t){i=i+t+'["'+n+'"="'+r+'"]'+e+";"})}),i+=");out body;>;out skel qt;",decodeURIComponent(i)}t.exports=function(e,t,n){return r(i(e),t,n)}},{}],6:[function(e,t,n){function r(e){return e.relations.forEach(function(t){var n=[]
t.members.forEach(function(t){if("outer"===t.role){var i=o(t.ref,e.ways)
i.forEach(function(e){n.push(e)})}}),t.tags&&e.feats.push({type:"Feature",properties:t.tags,geometry:{type:"Point",coordinates:p(n)}})}),e}function o(e,t){var n=null
for(i=0;i<t.length;i++)t[i].id===e&&(n=t[i].coords)
return n}function a(e){return e.ways.forEach(function(t){var n=[]
t.nodes.forEach(function(t){n.push(s(t,e.nodes))}),t.coords=n,t.tags&&e.feats.push({type:"Feature",properties:t.tags,geometry:{type:"Point",coordinates:p(t.coords)}})}),e}function s(e,t){var n=null
for(i=0;i<t.length;i++)if(t[i].id===e){n=[t[i].lon,t[i].lat]
break}return n}function p(e){var t=1/0,n=-(1/0),i=1/0,r=-(1/0)
return e.forEach(function(e){e[0]>n?n=e[0]:e[0]<t&&(t=e[0]),e[1]>r?r=e[1]:e[1]<i&&(i=e[1])}),[t+(n-t)/2,i+(r-i)/2]}function c(e){var t=[],n=[],i=[],r=[]
return e.elements.forEach(function(e){"node"===e.type?(t.push(e),e.tags&&r.push({type:"Feature",properties:e.tags,geometry:{type:"Point",coordinates:[e.lon,e.lat]}})):"way"===e.type?n.push(e):"relation"===e.type&&i.push(e)}),{nodes:t,ways:n,relations:i,feats:r}}function u(e){var t={},n=[]
return e.forEach(function(e){if(e.properties.name&&e.geometry.coordinates){var i=e.properties.name
t[i]||(t[i]=!0,n.push(e))}}),n}function l(e){var t=[]
return e.forEach(function(e){var n={name:e.properties.name},i={}
if(e.properties["addr:street"]&&(i.street=e.properties["addr:street"]),e.properties["addr:housenumber"]&&(i.nb=e.properties["addr:housenumber"]),i.nb&&i.street?n.adr=i.street+", "+i.nb:i.street&&(n.adr=i.street),e.properties.website&&(n.web=e.properties.website),e.properties.wikipedia){var r=e.properties.wikipedia.split(":"),o=r[1].split(" "),a=""
o.forEach(function(e,t){a+=e,t!==o.length-1&&(a+="_")}),n.wiki="https://"+r[0]+".wikipedia.org/wiki/"+a}if(e.properties.tourism&&(n.type=e.properties.tourism),e.properties.historic&&"yes"!==e.properties.historic){n.hist="Historic"
var s=e.properties.historic.split("_")
s.forEach(function(e){n.hist=n.hist+" "+e})}if(e.properties.phone&&(n.phone=e.properties.phone),e.properties.opening_hours){n.hours=[]
var p=e.properties.opening_hours.split(";")
p.forEach(function(e){n.hours.push(e.trim())})}e.properties=n,t.push(e)}),t}function m(e){var t=[]
return e.forEach(function(e){var n={name:e.properties.name},i={}
if(e.properties["addr:street"]&&(i.street=e.properties["addr:street"]),e.properties["addr:housenumber"]&&(i.nb=e.properties["addr:housenumber"]),i.nb&&i.street?n.adr=i.street+", "+i.nb:i.street&&(n.adr=i.street),e.properties.website&&(n.web=e.properties.website),"cafe"===e.properties.amenity?n.type="cafe":n.type="bar",e.properties.wikipedia){var r=e.properties.wikipedia.split(":"),o=r[1].split(" "),a=""
o.forEach(function(e,t){a+=e,t!==o.length-1&&(a+="_")}),n.wiki="https://"+r[0]+".wikipedia.org/wiki/"+a}if(e.properties.phone&&(n.phone=e.properties.phone),e.properties.opening_hours){n.hours=[]
var s=e.properties.opening_hours.split(";")
s.forEach(function(e){n.hours.push(e.trim())})}e.properties=n,t.push(e)}),t}function f(e){var t=[]
return e.forEach(function(e){var n={name:e.properties.name},i={}
if(e.properties["addr:street"]&&(i.street=e.properties["addr:street"]),e.properties["addr:housenumber"]&&(i.nb=e.properties["addr:housenumber"]),i.nb&&i.street?n.adr=i.street+", "+i.nb:i.street&&(n.adr=i.street),n.type="restaurant",e.properties.website&&(n.web=e.properties.website),e.properties.cuisine){n.cuisine=""
var r=e.properties.cuisine.split("_")
r.forEach(function(e,t){n.cuisine=n.cuisine+e,t!==r.length-1&&(n.cuisine=n.cuisine+" ")})}if(e.properties.wikipedia){var o=e.properties.wikipedia.split(":"),a=o[1].split(" "),s=""
a.forEach(function(e,t){s+=e,t!==a.length-1&&(s+="_")}),n.wiki="https://"+o[0]+".wikipedia.org/wiki/"+s}if(e.properties.phone&&(n.phone=e.properties.phone),e.properties.opening_hours){n.hours=[]
var p=e.properties.opening_hours.split(";")
p.forEach(function(e){n.hours.push(e.trim())})}e.properties=n,t.push(e)}),t}n.points=c,n.lines=a,n.polys=r,n.uniq=u,n.featuresTourism=l,n.featuresDrink=m,n.featuresEat=f},{}],7:[function(e,t,n){var i=e("./parse-utils")
n.tourism=function(e){var t=i.points(e),n=i.lines(t),r=i.polys(n),o=i.uniq(r.feats)
return i.featuresTourism(o)},n.drink=function(e){var t=i.points(e),n=i.lines(t),r=i.polys(n),o=i.uniq(r.feats)
return i.featuresDrink(o)},n.eat=function(e){var t=i.points(e),n=i.lines(t),r=i.polys(n),o=i.uniq(r.feats)
return i.featuresEat(o)}},{"./parse-utils":6}],8:[function(e,t,n){t.exports=function(e){var t=[]
return e.forEach(function(e){var n={name:e.display_name,coords:[+e.lon,+e.lat]}
t.push(n)}),t}},{}],9:[function(e,t,n){function i(e){return-80>e?.05200000000000004:-70>e?.027000000000000017:-60>e?.01800000000000001:-50>e?.014000000000000005:-40>e?.012000000000000004:-30>e?.011000000000000003:-20>e?.010000000000000002:-10>e?.010000000000000002:0>e?.009000000000000001:10>e?.010000000000000002:20>e?.010000000000000002:30>e?.011000000000000003:40>e?.012000000000000004:50>e?.014000000000000005:60>e?.01800000000000001:70>e?.027000000000000017:80>e?.05200000000000004:void 0}t.exports=function(e,t){var n=e[0]-i(e[1])*t,r=e[0]+i(e[1])*t,o=e[1]-.009*t,a=e[1]+.009*t
return[n,o,r,a]}},{}],10:[function(e,t,n){t.exports=function(e,t){var n=new XMLHttpRequest
n.open("GET",e,!0),n.onload=function(){if(n.status>=200&&n.status<400){var i=JSON.parse(n.responseText)
t(null,i)}else t('Server at "'+e+'" returned an error')},n.onerror=function(){t('Server at "'+e+'" did not answer')},n.send()}},{}],11:[function(e,t,n){function r(e,t){var n=document.getElementsByClassName("places")
for(i=0;i<n.length;i++)n[i].addEventListener("click",function(n){e.emit("place-coords",t[n.target.id])})}function o(e,t){var n='<div id="menu-init"><h2>Choose city</h2>',i={}
e.forEach(function(e,t){var r="place-"+t
n=n+'<p id="'+r+'" class="places">'+e.name+"</p>",i[r]=e.coords}),document.getElementById("menu").innerHTML=n+"</div>",t(i)}t.exports=function(e,t){o(t,function(t){r(e,t)})}},{}],12:[function(e,t,n){var i=e("./map-menu/main"),r=e("./map-menu/more"),o=e("./map-menu/legend")
t.exports=function(e,t){t.collapseMenu(),"main"===e?i(t):"more-menu"===e?r(t):"legend"===e&&o(t)}},{"./map-menu/legend":14,"./map-menu/main":15,"./map-menu/more":16}],13:[function(e,t,n){n.drink='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 19" width="30"><title>Drink</title><rect fill="none" x="0" y="0" width="19" height="19"></rect><path fill="#000" transform="translate(2 2)" d="M12,5V2c0,0-1-1-4.5-1S3,2,3,2v3c0.0288,1.3915,0.3706,2.7586,1,4c0.6255,1.4348,0.6255,3.0652,0,4.5c0,0,0,1,3.5,1 s3.5-1,3.5-1c-0.6255-1.4348-0.6255-3.0652,0-4.5C11.6294,7.7586,11.9712,6.3915,12,5z M7.5,13.5 c-0.7966,0.035-1.5937-0.0596-2.36-0.28c0.203-0.7224,0.304-1.4696,0.3-2.22h4.12c-0.004,0.7504,0.097,1.4976,0.3,2.22 C9.0937,13.4404,8.2966,13.535,7.5,13.5z M7.5,5C6.3136,5.0299,5.1306,4.8609,4,4.5v-2C5.131,2.1411,6.3137,1.9722,7.5,2 C8.6863,1.9722,9.869,2.1411,11,2.5v2C9.8694,4.8609,8.6864,5.0299,7.5,5z"></path></svg>',n.eat='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 19" width="30"><title>Eat</title><rect fill="none" x="0" y="0" width="19" height="19"></rect><path fill="#000" transform="translate(2 2)" d="M3.5,0l-1,5.5c-0.1464,0.805,1.7815,1.181,1.75,2L4,14c-0.0384,0.9993,1,1,1,1s1.0384-0.0007,1-1L5.75,7.5 c-0.0314-0.8176,1.7334-1.1808,1.75-2L6.5,0H6l0.25,4L5.5,4.5L5.25,0h-0.5L4.5,4.5L3.75,4L4,0H3.5z M12,0 c-0.7364,0-1.9642,0.6549-2.4551,1.6367C9.1358,2.3731,9,4.0182,9,5v2.5c0,0.8182,1.0909,1,1.5,1L10,14c-0.0905,0.9959,1,1,1,1 s1,0,1-1V0z"></path></svg>',n.tourism='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 19" width="30"><title>Tourism</title><rect fill="none" x="0" y="0" width="19" height="19"></rect><path fill="#000" transform="translate(2 2)" d="M6,2C5.446,2,5.2478,2.5045,5,3L4.5,4h-2C1.669,4,1,4.669,1,5.5v5C1,11.331,1.669,12,2.5,12h10 c0.831,0,1.5-0.669,1.5-1.5v-5C14,4.669,13.331,4,12.5,4h-2L10,3C9.75,2.5,9.554,2,9,2H6z M2.5,5C2.7761,5,3,5.2239,3,5.5 S2.7761,6,2.5,6S2,5.7761,2,5.5S2.2239,5,2.5,5z M7.5,5c1.6569,0,3,1.3431,3,3s-1.3431,3-3,3s-3-1.3431-3-3S5.8431,5,7.5,5z M7.5,6.5C6.6716,6.5,6,7.1716,6,8l0,0c0,0.8284,0.6716,1.5,1.5,1.5l0,0C8.3284,9.5,9,8.8284,9,8l0,0C9,7.1716,8.3284,6.5,7.5,6.5 L7.5,6.5z"></path></svg>',n.menu='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 19" height="19" width="19"><title>Menu</title><path fill="#000" transform="translate(0 -3)" d="M 2 3 C 1.446 3 1 3.446 1 4 L 1 5 C 1 5.554 1.446 6 2 6 L 17 6 C 17.554 6 18 5.554 18 5 L 18 4 C 18 3.446 17.554 3 17 3 L 2 3 z M 2 8 C 1.446 8 1 8.446 1 9 L 1 10 C 1 10.554 1.446 11 2 11 L 17 11 C 17.554 11 18 10.554 18 10 L 18 9 C 18 8.446 17.554 8 17 8 L 2 8 z M 2 13 C 1.446 13 1 13.446 1 14 L 1 15 C 1 15.554 1.446 16 2 16 L 17 16 C 17.554 16 18 15.554 18 15 L 18 14 C 18 13.446 17.554 13 17 13 L 2 13 z"></path></svg>',n.close='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 19" height="19" width="19"><title>Close</title><path fill="#000" transform="translate(0 -3)" d="M 4.625 3.125 C 4.3693886 3.1230136 4.1036348 3.2119095 3.90625 3.40625 L 3.21875 4.09375 C 2.8239805 4.4824311 2.7988189 5.1364804 3.1875 5.53125 L 7.40625 9.8125 L 3.1875 14.125 C 2.7988189 14.51977 2.8239804 15.142569 3.21875 15.53125 L 3.90625 16.21875 C 4.3010196 16.607431 4.9550689 16.61352 5.34375 16.21875 L 9.53125 11.96875 L 13.71875 16.21875 C 14.107431 16.61352 14.73023 16.607431 15.125 16.21875 L 15.84375 15.53125 C 16.23852 15.142569 16.232431 14.48852 15.84375 14.09375 L 11.625 9.8125 L 15.84375 5.53125 C 16.232431 5.1364804 16.23852 4.5136811 15.84375 4.125 L 15.125 3.40625 C 14.73023 3.0175689 14.107431 3.0427304 13.71875 3.4375 L 9.53125 7.6875 L 5.34375 3.40625 C 5.1494095 3.2088652 4.8806114 3.1269864 4.625 3.125 z"></path></svg>'},{}],14:[function(e,t,n){function i(e){return{html:'<div class="map-menu-legend">'+r()+"</div>",ctrl:function(){a.byId("map-menu-main-close").onclick=function(){e.evt.emit("map-menu-more-close")}}}}function r(){var e=["aquarium","artwork","attraction","gallery","information","museum","theme_park","viewpoint","zoo","bar","cafe","restaurant"],t=""
return e.forEach(function(e){t=t+'<div class="map-menu-legend-item"><div class="map-menu-leg-img"><img src="marker/'+e+'.png" alt="'+e+'"></div><div class="map-menu-leg-txt"><span>'+o(e)+"</span></div></div>"}),t}function o(e){var t=e.split("_")
return 1===t.length?e:t[0]+" "+t[1]}var a=(e("./icons"),e("../../dom")),s=e("./tmpl-main")
t.exports=function(e){s.view(e,i(e),function(){s.ctrl(e,i(e))})}},{"../../dom":21,"./icons":13,"./tmpl-main":17}],15:[function(e,t,n){var i=(e("./icons"),e("../../dom"),e("./tmpl-main"))
t.exports=function(e){i.view(e,null,function(){i.ctrl(e,null)})}},{"../../dom":21,"./icons":13,"./tmpl-main":17}],16:[function(e,t,n){function i(e){var t='<div class="map-menu-more"><div id="map-menu-more-change-city" class="map-menu-more-item"><span>Change city</span></div><div id="map-menu-more-legend" class="map-menu-more-item"><span>Map symbols</span></div></div>'
return{html:t,ctrl:function(){var t=e.evt
r.byId("map-menu-main-close").onclick=function(){t.emit("map-menu-more-close")},r.byId("map-menu-more-change-city").onclick=function(){window.location.reload()},r.byId("map-menu-more-legend").onclick=function(){t.emit("show-legend")}}}}var r=(e("./icons"),e("../../dom")),o=e("./tmpl-main")
t.exports=function(e){o.view(e,i(e),function(){o.ctrl(e,i(e))})}},{"../../dom":21,"./icons":13,"./tmpl-main":17}],17:[function(e,t,n){function i(e,t){var n=e.evt
s.byId("map-menu-main-tourism").onclick=function(){n.emit("map-show-tourism")},s.byId("map-menu-main-drink").onclick=function(){n.emit("map-show-drink")},s.byId("map-menu-main-eat").onclick=function(){n.emit("map-show-eat")},t?t.ctrl&&t.ctrl():s.byId("map-menu-main-more").onclick=function(){n.emit("map-menu-more")}}function r(e,t,n){var i=""
if(t){t.html&&(i=t.html)
var r='<div id="map-menu-main-close" class="map-menu-main-cell'+o("more",e)+'">'+a.close+"</div>"}else var r='<div id="map-menu-main-more" class="map-menu-main-cell'+o("more",e)+'">'+a.menu+"</div>"
i=i+'<div class="map-menu-main-row"><div id="map-menu-main-tourism" class="map-menu-main-cell'+o("tourism",e)+'">'+a.tourism+'</div><div id="map-menu-main-drink" class="map-menu-main-cell'+o("drink",e)+'">'+a.drink+'</div><div id="map-menu-main-eat" class="map-menu-main-cell'+o("eat",e)+'">'+a.eat+"</div>"+r+"<div>",e.menu.innerHTML=i,e.setMapHeight(),n()}function o(e,t){return t.mapMenu.current===e?" visible":""}var a=e("./icons"),s=e("../../dom")
n.ctrl=i,n.view=r},{"../../dom":21,"./icons":13}],18:[function(e,t,n){function r(e){document.getElementById("place-btn").onclick=function(){a(document.getElementById("place").value,function(t,n){if(t)e.emit("place-search-err",t)
else if(0===n.length)e.emit("place-search-none")
else{var r=[]
if(n.length>5)for(i=0;i<6;i++)r.push(n[i])
else r=n
e.emit("place-search-success",r)}})}}function o(e,t){var n='<div id="menu-init">'+s+'<input id="place"/ placeholder="Search a city"><button id="place-btn">OK</button>'
e&&(n=n+'<p id="info">'+e+"</p>"),n+="</div>",document.getElementById("menu").innerHTML=n,t()}var a=e("../api/get-place"),s=e("./tourist-icon")
t.exports=function(e,t){o(t,function(){r(e)})}},{"../api/get-place":3,"./tourist-icon":19}],19:[function(e,t,n){t.exports='<svg width="325" height="325" viewBox="0 0 325 325"><rect style="fill:#ffffff;fill-opacity:1;stroke:none" y="-40.163723" x="-44.793415" height="385.61288" width="405.08829"></rect><path style="fill:#b2793f;stroke:none;fill-opacity:1;opacity:0.2" id="path3016" d="m -17.527859,131.21978 50.636037,-1.94754 0,97.377 16.554089,0 0,-17.52786 22.396708,0.97377 1.94754,17.52786 34.081945,-0.97377 -2.92131,-52.58358 22.39671,0 2.92131,45.76719 27.26556,0 0,-103.21962 39.92457,-1.94754 0,85.69176 38.95079,0.97377 0,-38.9508 26.29179,-87.639293 20.44917,88.613063 -0.97377,36.02949 26.29179,0 -2.92131,-30.18687 42.84588,-4.86885 0,186.96383 -356.3997995,5.84262 -31.1606375,-30.18687 z" ></path><g id="layer1" transform="translate(-116.85239,-255.12772)" ><g   id="g3972"   transform="matrix(0.92986768,0,0,0.92986768,11.395078,41.641525)" ><path style="fill:#ce7668;stroke:none;fill-opacity:1" id="path3841" d="m 227.28432,447.28081 -1.01015,146.47212 114.14724,-4.04061 -7.07107,-164.65487 z" ></path><path style="fill:#e7bd92;fill-opacity:1;stroke:none" id="path2985" d="m 360.00001,335.21933 a 87.14286,80 0 1 1 -174.28572,0 87.14286,80 0 1 1 174.28572,0 z" ></path><path style="fill:#e7bd92;fill-opacity:1;stroke:none" id="path2987" d="m 384.86813,360.91275 a 36.87057,30.809655 0 1 1 -73.74114,0 36.87057,30.809655 0 1 1 73.74114,0 z" ></path><path style="fill:#ffffff;fill-opacity:1;stroke:none" id="path3770" transform="translate(4.0406102,12.121831)" d="m 311.12698,319.74905 a 17.67767,16.414978 0 1 1 -35.35534,0 17.67767,16.414978 0 1 1 35.35534,0 z" ></path><path style="fill:#ffffff;fill-opacity:1;stroke:none" id="path3770-9" transform="matrix(0.88571429,0,0,0.87692307,73.94317,38.091036)" d="m 311.12698,319.74905 a 17.67767,16.414978 0 1 1 -35.35534,0 17.67767,16.414978 0 1 1 35.35534,0 z" ></path><path style="fill:#1a1a1a;fill-opacity:1;stroke:none" id="path3792" transform="matrix(0.92592595,0,0,1,67.539916,-17.677677)" d="m 260.61936,356.87216 a 6.81853,6.0609159 0 1 1 -13.63706,0 6.81853,6.0609159 0 1 1 13.63706,0 z" ></path><path style="fill:#1a1a1a;fill-opacity:1;stroke:none" id="path3792-3" transform="matrix(0.74074076,0,0,0.79166667,148.12764,43.412435)" d="m 260.61936,356.87216 a 6.81853,6.0609159 0 1 1 -13.63706,0 6.81853,6.0609159 0 1 1 13.63706,0 z" ></path><path style="fill:#ffffff;stroke:none" id="path3821" d="m 240.41631,373.53967 c 13.41351,25.9403 32.63347,39.88059 66.16499,24.24366 -33.01447,3.87457 -46.91691,-13.10034 -66.16499,-24.24366 z" ></path><path style="fill:#8dbd9b;stroke:none;fill-opacity:1" id="path3823" d="m 185.4676,341.09595 c -5.24793,-41.17959 43.5274,-125.94493 141.82182,-71.09691 -64.64882,14.8747 -108.12281,37.3832 -141.82182,71.09691 z" ></path><path style="fill:#6cab7f;stroke:none;fill-opacity:1" id="path3825" d="m 250.90562,296.02841 c 25.50022,-8.33989 43.74892,-18.49598 75.10317,-25.5243 54.97782,-34.74037 -29.70035,-40.9468 -75.10317,25.5243 z" ></path><path style="fill:#ce7668;stroke:none;fill-opacity:1" id="path3839" d="m 253.54829,425.05745 -36.36549,9.09137 c -5.80699,2.56123 -10.64884,0.77933 -18.18275,11.11168 l -31.31473,44.44671 c -4.13951,11.25689 -13.09729,24.11986 10.10153,26.26397 l 98.99495,21.2132 5.05076,-27.27411 -84.85281,-15.15229 27.27412,-37.37565 85.86296,-21.2132 -10.10152,28.28427 c -4.59833,12.04092 3.72362,12.15542 11.11167,13.13198 l 71.72083,21.21321 4.04061,-20.20305 -60.60915,-14.14214 11.11168,-38.3858 c 1.40481,-9.91068 -8.94078,-11.07611 -20.86658,-9.56055 z" ></path><path style="fill:#e7bd92;stroke:none;fill-opacity:1" id="path3837" d="m 258.09397,409.65262 c -2.13117,7.6565 -3.89752,13.8537 -5.55583,19.61876 6.23402,2.65171 19.22261,8.94785 26.43728,0.6425 -3.82609,-6.66957 -5.18663,-13.33915 -7.24439,-20.00872 z" ></path><path style="fill:#1a1a1a;stroke:none" id="path3948" d="m 218.21429,554.86218 c -8.60669,-31.89815 -14.86464,-78.74562 23.92857,-126.78571 -25.87029,33.57979 -34.21691,77.059 -23.92857,126.78571 z" ></path><path style="fill:#1a1a1a;stroke:none" id="path3950" d="m 261.62951,543.2453 c 51.35056,-28.45225 51.21479,-74.06661 37.37564,-124.24876 20.55396,61.51082 7.78438,102.73775 -37.37564,124.24876 z" ></path><path style="fill:#9eb4ba;stroke:none;fill-opacity:1" id="path3835" d="m 278.8021,477.58538 16.16244,38.3858 -12.12183,58.58885 54.54824,3.03046 21.2132,-33.33504 46.46702,7.07107 8.08122,-27.27412 18.18275,-21.2132 -32.32488,-22.22336 0,-47.47717 -22.22336,17.1726 -13.13198,26.26396 -34.34519,-11.11168 -4.04061,20.20305 z" ></path><path style="fill:#e7bd92;stroke:none;fill-opacity:1" id="path3865" d="m 287.14286,513.79075 c 35.2235,4.52367 10.92659,25.01562 -2.85715,20.35715 -18.00691,-8.09325 -5.67077,-14.09388 2.85715,-20.35715 z" ></path><path style="fill:#e7bd92;stroke:none;fill-opacity:1" id="path3867" d="m 397.67857,469.86218 c -8.38243,23.04244 7.66187,17.80129 15.89286,21.60714 1.04043,-9.95805 4.21789,-20.84525 -15.89286,-21.60714 z" ></path><path style="opacity:0.07999998;fill:#1a1a1a;stroke:none" id="path3952" d="m 377.29198,450.31126 9.84898,62.882 -22.98097,-36.87057 z" ></path><path style="opacity:0.07999998;fill:#1a1a1a;stroke:none" id="path3954" d="m 329.81481,466.22117 16.92005,58.58885 -21.46574,-39.64849 z" ></path><path style="opacity:0.07999998;fill:#1a1a1a;stroke:none" id="path3956" d="m 358.35162,544.00291 -29.54697,-21.2132 8.5863,54.80078 z" ></path><path style="opacity:0.07999998;fill:#1a1a1a;stroke:none" id="path3960" d="m 227.14286,527.00504 44.64285,6.78571 -45.35714,-2.14285 z" ></path><path style="fill:#ce7668;stroke:none;fill-opacity:1" id="path3962" d="m 210.89286,497.00504 6.96428,1.60714 -0.35714,25.89286 -7.85714,-1.96429 z" ></path><path style="opacity:0.07999998;fill:#1a1a1a;stroke:none" id="path3964" d="m 273.92857,567.00504 -4.64286,8.92857 -12.85714,4.28571 -0.71428,7.5 -11.42858,3.92858 -0.71428,-7.14286 -15,5.71428 -1.78572,-3.21428 0.35715,-8.92857 z" ></path><path style="fill:#1a1a1a;stroke:none" id="path3904" d="m 263.13196,540.86182 12.14286,24.28572 -46.42857,18.57143 -11.42857,-29.28572 z" ></path><path style="fill:#1a1a1a;stroke:none" id="path3924" d="m 216.80399,556.88236 0.63135,-2.39911 57.70496,10.48033 -0.88388,2.39911 z" ></path><path style="fill:#333333;stroke:none" id="path3904-7" d="m 262.41769,543.00468 12.14286,24.28572 -46.42857,18.57143 -11.42857,-29.28572 z" ></path><path style="fill:#1a1a1a;fill-opacity:1;stroke:none" id="path3926" transform="translate(21.607143,-28.75)" d="m 233.39285,592.89789 a 10.625,9.4642859 0 1 1 -21.25,0 10.625,9.4642859 0 1 1 21.25,0 z" ></path><path style="fill:#666666;fill-opacity:1;stroke:none" id="path3926-7" transform="translate(21.160719,-27.14285)" d="m 233.39285,592.89789 a 10.625,9.4642859 0 1 1 -21.25,0 10.625,9.4642859 0 1 1 21.25,0 z" ></path><path style="fill:#999999;stroke:none" id="path3946" d="m 235.44643,568.34432 c 1.683,4.74813 5.90631,6.47208 12.58928,5.26786 -6.02388,0.38799 -9.63226,-1.86716 -12.58928,-5.26786 z" ></path><path style="opacity:0.07999998;fill:#1a1a1a;stroke:none" id="path3966" d="m 335.87572,389.95465 c -13.0524,-3.03313 -28.88796,-4.50074 -21.2132,-19.1929 0.97154,12.90379 10.24541,16.95177 21.2132,19.1929 z" ></path><path style="opacity:0.07999998;fill:#1a1a1a;stroke:none" id="path3968" d="M 216.42857,269.50504 C 171.08734,315.32935 172.15498,394.28313 258.39286,414.68361 184.9249,374.58139 200.8989,320.73196 216.42857,269.50504 z" ></path><path style="opacity:0.07999998;fill:#1a1a1a;stroke:none" id="path3970" d="M 257.32143,414.32647 252.5,428.79075 c 1.80673,1.42857 6.48057,2.85715 10.53571,4.28572 -4.81963,-6.88385 -4.31167,-12.60919 -5.71428,-18.75 z" ></path></g ></g></svg>'},{}],20:[function(e,t,n){var i=e("./dom")
t.exports=function(e){var t=this
t.menu=i.byId("menu"),t.map=i.byId("map"),t.state="init-menu",t.setState=function(e){t.state=e},t.evt=e,t.mapMenu={current:"tourism"},t.setMapHeight=function(){var e=window.innerHeight-t.menu.offsetHeight
t.map.style.height=e+"px"},t.collapseMenu=function(){i.clear(t.menu),t.setMapHeight()}}},{"./dom":21}],21:[function(e,t,n){n.byId=function(e){return document.getElementById(e)},n.byClass=function(e){var t=[],n=document.getElementsByClassName(e)
for(i=0;i<n.length;i++)t.push(n[i])
return t},n.byTag=function(e){var t=[],n=document.getElementsByTagName(e)
for(i=0;i<n.length;i++)t.push(n[i])
return t},n.clear=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},n.clearById=function(e){for(var t=document.getElementById(e);t.firstChild;)t.removeChild(t.firstChild)}},{}],22:[function(e,t,n){var i=e("./comp/search-place"),r=e("./comp/choose-place"),o=e("./comp/map-menu"),a=e("./map/init"),s=e("./api/get-overpass")
t.exports=function(e){var t=e.evt
t.on("page-load",function(){i(t)}),t.on("page-resize",function(){"map"===e.state&&e.setMapHeight()}),t.on("place-search-err",function(e){console.log("place-search-err",e)}),t.on("place-search-none",function(){i(t,"Could not find this city, try another spelling")}),t.on("place-search-success",function(e){r(t,e)}),t.on("place-coords",function(n){e.pt=n,s(n,"tourism",function(e,n){e?t.emit("tourism-data-err",e):t.emit("tourism-data",n)}),e.collapseMenu(),e.setState("map"),a("map",n,e),o("main",e)}),t.on("overpass-data-err",function(e){console.log("overpass-data-err",e)}),t.on("map-show-tourism",function(){e.mapData.data.tourism?t.emit("show-tourism-data"):s(e.pt,"tourism",function(e,n){e?t.emit("overpass-data-err",e):t.emit("tourism-data",n)}),e.mapMenu.current="tourism",o("main",e)}),t.on("map-show-drink",function(){e.mapData.data.drink?t.emit("show-drink-data"):s(e.pt,"drink",function(e,n){e?t.emit("overpass-data-err",e):t.emit("drink-data",n)}),e.mapMenu.current="drink",o("main",e)}),t.on("map-show-eat",function(){e.mapData.data.eat?t.emit("show-eat-data"):s(e.pt,"eat",function(e,n){e?t.emit("overpass-data-err",e):t.emit("eat-data",n)}),e.mapMenu.current="eat",o("main",e)}),t.on("map-menu-more",function(){e.mapMenu.prev=e.mapMenu.current,e.mapMenu.current="more",o("more-menu",e)}),t.on("map-menu-more-close",function(){e.mapMenu.current=e.mapMenu.prev,e.mapMenu.prev=void 0,o("main",e)}),t.on("show-legend",function(){console.log("evt show-legend"),o("legend",e)})}},{"./api/get-overpass":2,"./comp/choose-place":11,"./comp/map-menu":12,"./comp/search-place":18,"./map/init":26}],23:[function(e,t,n){function i(e){var t={}
return e.forEach(function(e){t[e]=r(e)}),t}function r(e){var t=L.icon({iconUrl:"marker/"+e+".png",iconSize:[30,38],iconAnchor:[15,38],popupAnchor:[0,-40]})
return t}var o=["aquarium","artwork","attraction","gallery","information","museum","theme_park","viewpoint","zoo","bar","cafe","restaurant"]
t.exports=function(){return i(o)}},{}],24:[function(e,t,n){var i=e("./create-popup")
t.exports=function(e,t){var n=L.layerGroup().addTo(e.map)
e.layers[t]=n,e.data[t].forEach(function(t){var r=e.icons[t.properties.type]
if(r){var o=L.marker([t.geometry.coordinates[1],t.geometry.coordinates[0]],{icon:r}),a=i(t.properties)
o.bindPopup(a),n.addLayer(o)}})}},{"./create-popup":25}],25:[function(e,t,n){function i(e){var t='<p class="popup-main"><span class="popup-title">'+e.name+"</span><br/>"
return e.hist&&(t=t+e.hist+"</br>"),e.cuisine&&(t=t+e.cuisine+"</br>"),e.adr&&(t=t+e.adr+"</br>"),e.hours&&(t+="Open:</br>",e.hours.forEach(function(e){t=t+e+"</br>"})),e.phone&&(t=t+"Phone: "+e.phone+"</br>"),e.website&&(t=t+'<a href="'+e.website+'" target="_blank">Website</a><br/>'),e.wiki&&(t=t+'<a href="'+e.wiki+'" target="_blank">Wikipedia</a><br/>'),t+="</p>"}t.exports=function(e){return i(e)}},{}],26:[function(e,t,n){function i(e,t){for(k in e.layers)e.map.removeLayer(e.layers[k])
e.layers={},t()}var r=e("./create-icons"),o=e("./create-layer")
t.exports=function(e,t,n){var a=n.evt,s={layers:{},data:{},icons:r()},p=L.map(e)
p.setView(new L.LatLng(t[1],t[0]),15),s.map=p,n.mapData=s
L.tileLayer("http://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',subdomains:"abcd",id:"mapbox.streets",accessToken:"pk.eyJ1IjoiYW5kZXJzLWlkcmlzLW1hcHMiLCJhIjoiY2l3eGt0cDExMDFmcjJ6bHFoenh5YnpycSJ9.bqmpIY7CFFIOl7vgILaV0A"}).addTo(p)
a.on("tourism-data",function(e){s.data.tourism=e,i(s,function(){o(s,"tourism")})}),a.on("drink-data",function(e){s.data.drink=e,i(s,function(){o(s,"drink")})}),a.on("eat-data",function(e){s.data.eat=e,i(s,function(){o(s,"eat")})}),a.on("show-tourism-data",function(){i(s,function(){o(s,"tourism")})}),a.on("show-drink-data",function(){i(s,function(){o(s,"drink")})}),a.on("show-eat-data",function(){i(s,function(){o(s,"eat")})})}},{"./create-icons":23,"./create-layer":24}],27:[function(e,t,n){var i=e("events").EventEmitter,r=e("./lib/events"),o=e("./lib/config")
window.onload=function(){var e=new i,t=new o(e)
window.config=t,r(t),e.emit("page-load"),window.onresize=function(){e.emit("page-resize")}}},{"./lib/config":20,"./lib/events":22,events:1}]},{},[27])
